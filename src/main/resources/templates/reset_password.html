<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
    <meta charset="UTF-8">
    <title>Restablecer Contraseña | Ecom Store</title>
</head>
<body>
	<section class="reset-password-page">
        <!-- Enlace al CSS -->
        <link rel="stylesheet" href="/css/reset-password.css">

		<div class="container">
			<div class="row align-items-center justify-content-center">
				
                <!-- Ilustración Lateral -->
				<div class="col-md-6 d-none d-md-block text-center p-5">
					<img th:src="@{/img/ecom.png}" alt="Seguridad" class="img-fluid" style="max-height: 400px; filter: hue-rotate(200deg);">
				</div>

                <!-- Tarjeta de Formulario -->
				<div class="col-md-6 col-lg-5 p-4">
					<div class="card card-reset">
						<div class="card-header bg-white border-0 text-center">
                            <div class="reset-icon-box">
                                <i class="fa-solid fa-shield-keyhole"></i>
                            </div>
							<h3 class="fw-bold text-dark">Nueva Contraseña</h3>
                            <p class="text-muted">Crea una clave segura para proteger tu cuenta.</p>

							<!-- Alertas Dinámicas -->
							<div th:if="${session.succMsg}" class="alert alert-success border-0 py-2 shadow-sm small">
								<i class="fa-solid fa-circle-check me-2"></i> [[${session.succMsg}]]
								<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
							</div>

							<div th:if="${session.errorMsg}" class="alert alert-danger border-0 py-2 shadow-sm small">
								<i class="fa-solid fa-circle-exclamation me-2"></i> [[${session.errorMsg}]]
								<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
							</div>
						</div>

						<div class="card-body">
                            <!-- Quitamos novalidate para que jQuery Validate funcione -->
							<form action="/reset-password" method="post" id="resetPassword">
								
                                <div class="mb-4">
									<label class="form-label">Nueva Contraseña</label> 
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fa-solid fa-lock"></i></span>
                                        <input id="pass" class="form-control bg-light" name="password" type="password" placeholder="Mínimo 6 caracteres">
                                    </div>
								</div>

								<div class="mb-4">
									<label class="form-label">Confirmar Contraseña</label> 
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fa-solid fa-check-double"></i></span>
                                        <input name="confirmPassword" class="form-control bg-light" type="password" placeholder="Repite tu contraseña">
                                    </div>
								</div>

                                <!-- Token oculto de seguridad -->
								<input type="hidden" th:value="${token}" name="token">

								<button type="submit" class="btn btn-primary btn-reset w-100 text-white shadow">
									Actualizar Contraseña <i class="fa-solid fa-paper-plane ms-2"></i>
								</button>
							</form>
						</div>

                        <div class="card-footer bg-white border-0 text-center pb-4">
                            <p class="small text-muted mb-0">
                                <i class="fa-solid fa-circle-info me-1"></i> Asegúrate de usar mayúsculas y números.
                            </p>
                        </div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>
